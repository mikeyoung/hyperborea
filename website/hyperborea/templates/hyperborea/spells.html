{% extends 'hyperborea/layout.html' %}

{% block title %}Spells{% endblock %}

{% load static %}

{% block body %}
<h1 class="text-center page-header">Spells of Hyperborea</h1>
<div class="container">
    <form action="/" method="get" id="spell-form">
        <div class="row">
            <div class="col-12 col-sm-6 text-center">
                <label for="class">Class:</label><br>
                <select name="class" id="class">
                    <option value="all">All Classes</option>
                    {% for class in class_list %}
                        {% if selected_character_class.name == class.name %}
                            <option value="{{class.pk}}" selected="selected">{{class.name|capfirst}}</option>
                        {% else %}
                            <option value="{{class.pk}}">{{class.name|capfirst}}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div> 
            <div class="col-12 col-sm-6 text-center">
                <label for="level">Level:</label><br>
                <select name="level" id="level">
                    <option value="all">All Levels</option>
                    {% for level in levels %}
                        {% if selected_level == level %}
                            <option value="{{level}}" selected="selected">{{level}}</option>
                        {% else %}
                            <option value="{{level}}">{{level}}</option>
                        {% endif %}
                   {% endfor %}
                </select>
            </div>   
        </div>
    </form>

    {% if selected_character_class == 'all' and selected_level == 'all' %}
       <h3>All Known Spells of the Realm</h3>
    {% endif %}
    
    {% if selected_character_class == 'all' and selected_level != 'all' %}
       <h3>All Level {{ selected_level }} Spells</h3>
    {% endif %}
    
    {% if selected_character_class != 'all' and selected_level == 'all' %}
       <h3>All {{ selected_character_class|capfirst }} Spells</h3>
    {% endif %}

    {% if selected_character_class != 'all' and selected_level != 'all' %}
       <h3>All Level {{ selected_level }} {{ selected_character_class|capfirst }} Spells</h3>
    {% endif %}

    <uL class="spell-list text-center">
        {% for spell in spell_list %}
            {% if selected_character_class == 'all' and selected_level == 'all' %}
               <li><a href="javascript:void(0)" data-spell_id="{{spell.pk}}">{{ spell.spell_name }} ({{spell.character_class|capfirst}} Level {{spell.level}})</a></li>
            {% endif %}
            
            {% if selected_character_class == 'all' and selected_level != 'all' %}
               <li><a href="javascript:void(0)" data-spell_id="{{spell.pk}}">{{ spell.spell_name }} ({{spell.character_class|capfirst}})</a></li>
            {% endif %}
            
            {% if selected_character_class != 'all' and selected_level == 'all' %}
               <li><a href="javascript:void(0)" data-spell_id="{{spell.pk}}">{{ spell.spell_name }} (Level {{spell.level}})</a></li>
            {% endif %}

            {% if selected_character_class != 'all' and selected_level != 'all' %}
               <li><a href="javascript:void(0)" data-spell_id="{{spell.pk}}">{{ spell.spell_name }}</a></li>
            {% endif %}
        {% endfor %}
    </uL>
</div>

<!-- level = models.PositiveIntegerField(validators=[MinValueValidator(1), MaxValueValidator(6)],null=True)
character_class = models.ForeignKey(CharacterClass, on_delete=models.CASCADE, related_name="character_class_spell_list_item", null=True)
spell = models.ForeignKey(Spell, on_delete=models.CASCADE, related_name="spell_spell_list_item", null=True) -->



<script src="{% static 'hyperborea/script/main.js' %}" defer></script>
{% endblock %}